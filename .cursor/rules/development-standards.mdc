---
description: 
globs: 
alwaysApply: true
---
# Development Standards and Coding Guidelines

## Code Organization and Architecture

### File Structure Standards
- **HTML Files**: Use semantic HTML5 structure with proper document outline
- **CSS Files**: Organize by component/section, use consistent naming conventions
- **JavaScript Files**: Modular approach with clear separation of concerns
- **Data Files**: Structured JSON/Markdown with consistent schemas

### Naming Conventions

#### File and Directory Names
- **HTML/CSS/JS**: Use kebab-case for filenames (`team-loader.js`, `research-details.html`)
- **Images**: Descriptive names with hyphens (`speaker-photo-2024.jpg`, `group-meeting-nov.png`)
- **Data Directories**: Follow established patterns (see [team-data-management.mdc](mdc:.cursor/rules/team-data-management.mdc))

#### CSS Class Naming
- **Components**: Use BEM-like methodology (`.section-title`, `.research-area__content`)
- **Utilities**: Prefix with 'u-' (`.u-hidden`, `.u-text-center`)
- **JavaScript hooks**: Prefix with 'js-' (`.js-slideshow-nav`, `.js-team-filter`)
- **States**: Use 'is-' prefix (`.is-active`, `.is-loading`, `.is-visible`)

#### JavaScript Variables and Functions
- **Variables**: camelCase for standard variables (`teamMembers`, `currentSlide`)
- **Constants**: UPPER_SNAKE_CASE for constants (`API_ENDPOINT`, `DEFAULT_TIMEOUT`)
- **Functions**: camelCase with descriptive names (`loadTeamData`, `initializeSlideshow`)
- **Event handlers**: Prefix with 'handle' (`handleSlideChange`, `handleMenuToggle`)

## HTML Standards

### Document Structure
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="[Page description for SEO]">
    
    <!-- Title with consistent format -->
    <title>[Page Title] | JC STEM Lab of Smart City</title>
    
    <!-- Stylesheets in order of specificity -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Content with semantic structure -->
</body>
</html>
```

### Semantic HTML Guidelines
- **Navigation**: Use `<nav>` element with proper landmarks
- **Main Content**: Wrap in `<main>` element
- **Sections**: Use `<section>` with heading hierarchy
- **Articles**: Use `<article>` for standalone content
- **Asides**: Use `<aside>` for supplementary content

### Accessibility Requirements
- **Alt Text**: Provide descriptive alt attributes for all images
- **ARIA Labels**: Use ARIA attributes for dynamic content and interactions
- **Focus Management**: Ensure keyboard navigation works properly
- **Color Contrast**: Maintain WCAG 2.1 AA compliance (4.5:1 ratio minimum)
- **Screen Readers**: Test with screen reader software

### Form Standards
```html
<form class="contact-form" role="form" aria-labelledby="form-title">
    <fieldset>
        <legend id="form-title">Contact Information</legend>
        
        <label for="email" class="form-label">
            Email Address <span class="required" aria-label="required">*</span>
        </label>
        <input type="email" id="email" name="email" 
               class="form-input" required 
               aria-describedby="email-help">
        <div id="email-help" class="form-help">
            We'll never share your email address
        </div>
    </fieldset>
</form>
```

## CSS Architecture

### Style Organization
```css
/* 1. Variables and Custom Properties */
:root {
    --primary-color: #bd384b;
    --secondary-color: #2c3e50;
    --text-color: #333;
    --bg-color: #fff;
    --font-family: 'Inter', sans-serif;
    --border-radius: 8px;
    --transition: 0.3s ease;
}

/* 2. Reset and Base Styles */
/* 3. Layout Components */
/* 4. UI Components */
/* 5. Utilities */
/* 6. Media Queries */
```

### Responsive Design Principles
```css
/* Mobile-first approach */
.component {
    /* Base mobile styles */
    display: flex;
    flex-direction: column;
}

/* Tablet and up */
@media (min-width: 768px) {
    .component {
        flex-direction: row;
    }
}

/* Desktop and up */
@media (min-width: 1024px) {
    .component {
        max-width: 1200px;
        margin: 0 auto;
    }
}
```

### Grid and Flexbox Usage
- **CSS Grid**: Use for two-dimensional layouts (research areas, team grids)
- **Flexbox**: Use for one-dimensional layouts (navigation, card layouts)
- **Avoid floats**: Use modern layout methods instead of legacy float-based layouts

### Performance Optimization
- **Critical CSS**: Inline above-the-fold styles when possible
- **Unused CSS**: Regularly audit and remove unused styles
- **Vendor Prefixes**: Use autoprefixer for browser compatibility
- **Minification**: Compress CSS for production deployment

## JavaScript Standards

### Code Structure and Modules
```javascript
// Module pattern for organization
const TeamManager = (function() {
    // Private variables
    let teamData = [];
    let currentFilter = 'all';
    
    // Private methods
    function loadData() {
        // Implementation
    }
    
    function renderTeam() {
        // Implementation
    }
    
    // Public API
    return {
        init: function() {
            loadData();
            bindEvents();
        },
        
        filterBy: function(category) {
            currentFilter = category;
            renderTeam();
        }
    };
})();

// Initialize on DOM ready
document.addEventListener('DOMContentLoaded', function() {
    TeamManager.init();
});
```

### Event Handling Best Practices
```javascript
// Use event delegation for dynamic content
document.addEventListener('click', function(e) {
    if (e.target.matches('.js-filter-btn')) {
        handleFilterClick(e);
    }
    
    if (e.target.matches('.js-modal-trigger')) {
        handleModalOpen(e);
    }
});

// Debounce expensive operations
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Usage
const handleSearch = debounce(function(searchTerm) {
    // Expensive search operation
}, 300);
```

### Error Handling and Validation
```javascript
// Fetch with proper error handling
async function loadTeamData() {
    try {
        const response = await fetch('/data/team.json');
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        
        // Validate data structure
        if (!Array.isArray(data) || data.length === 0) {
            throw new Error('Invalid team data format');
        }
        
        return data;
        
    } catch (error) {
        console.error('Failed to load team data:', error);
        showErrorMessage('Unable to load team information. Please try again.');
        return [];
    }
}

// Input validation
function validateEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

function validateRequired(value) {
    return value && value.trim().length > 0;
}
```

### Performance Optimization
```javascript
// Lazy loading for images
const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.classList.remove('lazy');
            observer.unobserve(img);
        }
    });
});

// Observe all lazy images
document.querySelectorAll('img[data-src]').forEach(img => {
    imageObserver.observe(img);
});

// Efficient DOM manipulation
function updateTeamDisplay(teamMembers) {
    // Use DocumentFragment for batch updates
    const fragment = document.createDocumentFragment();
    
    teamMembers.forEach(member => {
        const memberCard = createMemberCard(member);
        fragment.appendChild(memberCard);
    });
    
    // Single DOM update
    const container = document.getElementById('team-container');
    container.innerHTML = '';
    container.appendChild(fragment);
}
```

## Data Management Standards

### JSON Structure Guidelines
```json
{
    "research": {
        "Connected and Autonomous Driving (CAD)": {
            "Vehicle-to-Everything (V2X) Communications": {
                "description": "Advanced communication systems for autonomous vehicles",
                "keywords": ["V2X", "autonomous driving", "communication"],
                "projects": []
            }
        }
    },
    "metadata": {
        "lastUpdated": "2024-01-15T10:30:00Z",
        "version": "1.2.0",
        "schema": "research-areas-v1"
    }
}
```

### Markdown Front-Matter Standards
```yaml
---
# Required fields
title: "Content Title"
date: "YYYY-MM-DD"

# Optional but recommended
author: "Author Name"
description: "Brief description for SEO"
keywords: ["keyword1", "keyword2", "keyword3"]

# Custom fields as needed
category: "seminar"
featured: true
draft: false
---
```

## Browser Compatibility and Testing

### Supported Browsers
- **Chrome**: 70+ (95% of users)
- **Firefox**: 65+ (ESR and current)
- **Safari**: 12+ (macOS and iOS)
- **Edge**: 79+ (Chromium-based)

### Feature Detection
```javascript
// Check for required features
if ('IntersectionObserver' in window) {
    // Use Intersection Observer
} else {
    // Fallback implementation
}

// CSS feature detection
if (CSS.supports('display', 'grid')) {
    document.body.classList.add('has-grid');
} else {
    document.body.classList.add('no-grid');
}
```

### Progressive Enhancement
```javascript
// Base functionality that works everywhere
function basicSlideshow() {
    // Simple implementation using basic DOM methods
}

// Enhanced functionality for modern browsers
function enhancedSlideshow() {
    // Use modern APIs like Intersection Observer, CSS Grid, etc.
}

// Feature detection and enhancement
if (window.IntersectionObserver && CSS.supports('display', 'grid')) {
    enhancedSlideshow();
} else {
    basicSlideshow();
}
```

## Security Best Practices

### Input Sanitization
```javascript
// Sanitize user input
function sanitizeHtml(str) {
    const div = document.createElement('div');
    div.textContent = str;
    return div.innerHTML;
}

// Validate URLs
function isValidUrl(string) {
    try {
        const url = new URL(string);
        return url.protocol === 'http:' || url.protocol === 'https:';
    } catch (_) {
        return false;
    }
}
```

### Content Security Policy
```html
<!-- Add CSP headers for security -->
<meta http-equiv="Content-Security-Policy" 
      content="default-src 'self'; 
               script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; 
               style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; 
               font-src 'self' https://fonts.gstatic.com; 
               img-src 'self' data: https:;">
```

## Testing and Quality Assurance

### Manual Testing Checklist
- [ ] **Responsive Design**: Test on mobile, tablet, desktop
- [ ] **Cross-browser**: Verify functionality across supported browsers
- [ ] **Accessibility**: Test with keyboard navigation and screen readers
- [ ] **Performance**: Check page load times and Core Web Vitals
- [ ] **Links**: Verify all internal and external links work
- [ ] **Forms**: Test form validation and submission
- [ ] **JavaScript**: Ensure graceful degradation when JS is disabled

### Code Validation
- **HTML**: Validate with W3C Markup Validator
- **CSS**: Check with W3C CSS Validator
- **JavaScript**: Use ESLint for code quality
- **Accessibility**: Test with axe-core or similar tools

### Performance Monitoring
```javascript
// Core Web Vitals monitoring
function measureCoreWebVitals() {
    // Largest Contentful Paint
    new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
            console.log('LCP:', entry.startTime);
        }
    }).observe({entryTypes: ['largest-contentful-paint']});
    
    // First Input Delay
    new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
            console.log('FID:', entry.processingStart - entry.startTime);
        }
    }).observe({entryTypes: ['first-input']});
}
```

## Deployment and Build Process

### Pre-deployment Checklist
- [ ] **Code Review**: All changes reviewed by team member
- [ ] **Testing**: All manual and automated tests pass
- [ ] **Optimization**: Images optimized, code minified
- [ ] **Validation**: HTML, CSS, and accessibility validated
- [ ] **Security**: No sensitive data exposed in client-side code
- [ ] **Performance**: Page speed meets requirements
- [ ] **Backup**: Current version backed up before deployment

### Version Control Standards
```bash
# Commit message format
git commit -m "type(scope): description

- Detailed explanation of changes
- Reference to related issues or tickets
- Breaking changes noted"

# Branch naming
feature/team-member-profiles
bugfix/slideshow-navigation
hotfix/security-update
```

### Environment Configuration
- **Development**: Local development with live reload
- **Staging**: Pre-production testing environment
- **Production**: Live website with optimized assets and monitoring
